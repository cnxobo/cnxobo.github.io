---
title: 双网卡按指定网卡上网
tags: []
id: '225'
categories:
  - - Something
date: 2012-09-29 17:39:25
---

本机环境: win7 64 场景描述： 在客户公司，可以使用无线网通过http代理上外网,但不能访问内网，有线可以访问内网但是无法访问代理服务器。 代理服务器： 172.16.80.8 需要访问内网数据库：172.16.80.40 有线网网关：192.168.133.254 无线网网关：192.168.127.254 为了实现上外网的同时访问内网数据库，我打起了windows自身的route的主意。 由于代理服务器跟数据库属于同一网段，所以要给他们再划分一下子网。 8，40.我很自然的想到了32. 利用通过主机数计算子网掩码的方法可以得出224,也就是255.255.255.224. 1. 把默认路由删掉。(双网卡，所以有两条默认路由记录) `route delete 0.0.0.0` 2\. 再添加默认路由(如果路由表中没有记录就走这个无线) `route add 0.0.0.0 mask 0.0.0.0 192.168.127.254` 3. 为数据库添加路由(访问172.16.80.31~172.16.80.63时使用有线) `route add 172.16.80.32 mask 255.255.255.224 192.168.133.254` 这样就实现同时访问内网数据库及外网。